<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/tufte.css"> <link rel=stylesheet  href="/css/latex.css"> <link rel=stylesheet  href="/css/adjust.css"> <link rel=icon  href="/assets/favicon.png"> <title>Learn MCS51: Blink LED</title> <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "0550f3275b4a4db8bfeefed116695300"}'></script> <div id=layout > <div id=menu > <ul> <li><a href="/">Home</a> </ul> </div> <div id=main > <div class=franklin-content > <h1 id=title ><a href="#title" class=header-anchor >Learn MCS51: Blink LED</a></h1> <h2 id=goal ><a href="#goal" class=header-anchor >Goal</a></h2> <p>Blink a LED on the board.</p> <h2 id=schematic ><a href="#schematic" class=header-anchor >Schematic</a></h2> <p><img src="/assets/images/mcs51-pinecore-pi-nano-led.png" alt="" /></p> <p>To light LED1, we need the electric current flow from <code>VCC</code> to <code>P10</code>.</p> <h2 id=code ><a href="#code" class=header-anchor >Code</a></h2> <pre><code class="c hljs"><span class=hljs-meta >#<span class=hljs-keyword >include</span> <span class=hljs-string >&quot;stc8fsdcc.h&quot;</span></span>
<span class=hljs-meta >#<span class=hljs-keyword >include</span> <span class=hljs-string >&quot;delay.h&quot;</span></span>

<span class=hljs-type >void</span> <span class="hljs-title function_">main</span><span class=hljs-params >(<span class=hljs-type >void</span>)</span> {
  P55 = <span class=hljs-number >0</span>; <span class=hljs-comment >// allows electric current flow from VCC</span>

  <span class=hljs-keyword >while</span> (<span class=hljs-number >1</span>) {
    P10 = <span class=hljs-number >0</span>;  <span class=hljs-comment >// output 0v, led on</span>
    delay_ms(<span class=hljs-number >1000</span>);

    P10 = <span class=hljs-number >1</span>;  <span class=hljs-comment >// output 5v, led off</span>
    delay_ms(<span class=hljs-number >1000</span>);
  }
}</code></pre> <h2 id=build_and_upload ><a href="#build_and_upload" class=header-anchor >Build and Upload</a></h2> <pre><code class="bash hljs">sdcc --Werror --model-small blink.c -o blink.hex
packihx blink.hex &gt; upload.hex
stcgal -P stc8 upload.hex</code></pre> <div class=page-foot > Kauruus <br> <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <br> Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>